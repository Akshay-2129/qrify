<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>‚úÖ QR Code Result</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
body{font-family:'Montserrat',sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;align-items:center;min-height:100vh;color:#fff;padding:15px;}
.container{background:#fff;color:#333;padding:30px 20px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,0.2);width:100%;max-width:380px;text-align:center;animation:slideUp 0.6s ease;}
@keyframes slideUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
h1{font-size:1.6rem;font-weight:700;margin-bottom:20px;background:-webkit-linear-gradient(45deg,#6a11cb,#2575fc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
img{max-width:80%;border-radius:12px;padding:15px;background:#f9f9f9;box-shadow:0 6px 20px rgba(0,0,0,0.15);margin-bottom:20px;transition:transform 0.3s ease;}
img:hover{transform:scale(1.03);}
.buttons{display:flex;flex-direction:column;gap:12px;margin-bottom:15px;}
a.button{padding:12px 0;font-weight:600;font-size:0.95rem;border-radius:12px;text-decoration:none;color:white;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(0,0,0,0.15);}
a.download{background:linear-gradient(135deg,#44c767,#5cbf2a);}
a.download:hover{background:linear-gradient(135deg,#3cb64a,#4ba222);transform:translateY(-1px) scale(1.02);}
a.generate{background:linear-gradient(135deg,#667eea,#764ba2);}
a.generate:hover{background:linear-gradient(135deg,#5a67d8,#6b5cd1);transform:translateY(-1px) scale(1.02);}
.copy-section{margin-top:15px;display:flex;justify-content:center;gap:8px;align-items:center;}
.copy-section input{padding:8px;border-radius:8px;border:1px solid #ccc;width:200px;}
.copy-section button{padding:8px 12px;border:none;border-radius:8px;background:#44c767;color:white;cursor:pointer;}
.history-section{margin-top:20px;text-align:left;}
.history-section h3{margin-bottom:10px;color:#333;}
.history-item{display:flex;align-items:center;gap:8px;margin-bottom:8px;}
.history-item img{width:50px;height:50px;border-radius:6px;cursor:pointer;object-fit:cover;}
.history-item button{padding:4px 8px;font-size:0.8rem;border:none;border-radius:6px;background:#667eea;color:white;cursor:pointer;}
footer{font-size:0.8rem;color:#aaa;margin-top:20px;}
.ad-container{margin:20px 0;}
@media(max-width:400px){.container{padding:25px 15px;}h1{font-size:1.4rem;}img{max-width:90%;}a.button{font-size:0.9rem;padding:10px 0;}}
</style>
</head>
<body>
<main class="container">
<h1>‚úÖ Your QR Code is Ready!</h1>
<img id="qrImage" src="{{ qr_path }}" alt="Generated QR Code">

<div class="ad-container">
<p style="color:#777;font-size:0.9rem;">[Ad Placeholder]</p>
</div>

<div class="buttons">
<a href="/download?link={{ link }}" class="button download">‚¨áÔ∏è Download QR Code</a>
<a href="/" class="button generate">üîÑ Generate Another</a>
</div>

<div class="copy-section">
<input type="text" id="qrLink" value="{{ link }}" readonly>
<button onclick="copyLink()">üìã Copy Link</button>
</div>

<div class="history-section">
<h3>üïò Your Recent QRs:</h3>
<div id="qrHistory"></div>
</div>

<footer>&copy; 2025 QRify ‚Ä¢ Built with ‚ù§Ô∏è</footer>
</main>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
function celebrate() {
    confetti({particleCount: 100,spread: 70,origin: { y: 0.6 }});
}
celebrate();

function copyLink(){
    const copyText = document.getElementById("qrLink");
    copyText.select();
    copyText.setSelectionRange(0,99999);
    navigator.clipboard.writeText(copyText.value).then(()=>{alert("QR link copied!");});
}

const currentQR = {link: "{{ link }}", path: "{{ qr_path }}"};
let history = JSON.parse(localStorage.getItem("qrify_history") || "[]");
history.unshift(currentQR);
history = history.slice(0,5);
localStorage.setItem("qrify_history", JSON.stringify(history));

const qrHistoryDiv = document.getElementById("qrHistory");
qrHistoryDiv.innerHTML = "";
history.forEach((item)=>{
    const div = document.createElement("div");
    div.classList.add("history-item");
    const img = document.createElement("img");
    img.src = item.path;
    img.title = item.link;
    img.onclick = ()=>{
        document.getElementById("qrImage").src = item.path;
        document.getElementById("qrLink").value = item.link;
        celebrate();
    };
    const btn = document.createElement("button");
    btn.textContent = "Copy Link";
    btn.onclick = ()=>{
        navigator.clipboard.writeText(item.link).then(()=>{alert("QR link copied!");});
    };
    div.appendChild(img);
    div.appendChild(btn);
    qrHistoryDiv.appendChild(div);
});
</script>
</body>
</html>
